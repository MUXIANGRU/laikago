<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xenomai: API service tags</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">3.0.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('api-tags.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">API service tags </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>All services from the Cobalt/POSIX library, or which belong to APIs based on the Copperplate library may be restricted to particular calling contexts, or entail specific side-effects.</p>
<p>In dual kernel mode, the Cobalt API underlies all other application-oriented APIs, providing POSIX real-time services over the Cobalt real-time core. Therefore, the information below applies to all application-oriented APIs available with Xenomai, such as the Cobalt/POSIX library, the Alchemy API, and to all RTOS emulators as well. To describe this information, each service documented by this section bears a set of tags when applicable.</p>
<p>The table below matches the tags used throughout the documentation with the description of their meaning for the caller.</p>
<dl class="section attention"><dt>Attention</dt><dd>By Xenomai thread, we mean any thread created by a Xenomai API service, including real-time Cobalt/POSIX threads in dual kernel mode. By regular/plain POSIX thread, we mean any thread directly created by the standard <em>glibc-based</em> POSIX service over Mercury or Cobalt (i.e. NPTL/linuxthreads __STD(pthread_create())), excluding such threads which have been promoted to the real-time domain afterwards (aka "shadowed") over Cobalt.</dd></dl>
<dl class="section user"><dt></dt><dd><b>Context tags</b> <table class="doxtable">
<tr>
<th>Tag </th><th>Context on entry </th></tr>
<tr>
<td>xthread-only </td><td>Must be called from a Xenomai thread </td></tr>
<tr>
<td>xhandler-only </td><td>Must be called from a Xenomai handler. See note. </td></tr>
<tr>
<td>xcontext </td><td>May be called from any Xenomai context (thread or handler). </td></tr>
<tr>
<td>pthread-only </td><td>Must be called from a regular POSIX thread </td></tr>
<tr>
<td>thread-unrestricted </td><td>May be called from a Xenomai or regular POSIX thread indifferently </td></tr>
<tr>
<td>xthread-nowait </td><td>May be called from a Xenomai thread unrestricted, or from a regular thread as a non-blocking service only. See note. </td></tr>
<tr>
<td>unrestricted </td><td>May be called from any context previously described </td></tr>
</table>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>A Xenomai handler is used for callback-based notifications from Copperplate-based APIs, such as timeouts. This context is <em>NOT</em> mapped to a regular Linux signal handler, it is actually underlaid by a special thread context, so that async-unsafe POSIX services may be invoked internally by the API implementation when running on behalf of such handler. Therefore, calling Xenomai API services from asynchronous regular signal handlers is fundamentally unsafe.</dd>
<dd>
Over Cobalt, the main thread is a particular case, which starts as a regular POSIX thread, then is automatically switched to a Cobalt thread as part of the initialization process, before the main() routine is invoked, unless automatic bootstrap was disabled (see <a href="http://xenomai.org/2015/05/application-setup-and-init/#Application_entry_CC">http://xenomai.org/2015/05/application-setup-and-init/#Application_entry_CC</a>).</dd></dl>
<dl class="section user"><dt></dt><dd><b>Possible side-effects when running the application over the Cobalt core (i.e. dual kernel configuration)</b></dd></dl>
<table class="doxtable">
<tr>
<th>Tag </th><th>Description </th></tr>
<tr>
<td>switch-primary </td><td>the caller may switch to primary mode </td></tr>
<tr>
<td>switch-secondary </td><td>the caller may switch to secondary mode </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>As a rule of thumb, any service which might block the caller, causes a switch to primary mode if invoked from secondary mode. This rule might not apply in case the service can complete fully from user-space without any syscall entailed, due to a particular optimization (e.g. fast acquisition of semaphore resources directly from user-space in the non-contended case). Therefore, the switch-{primary, secondary} tags denote either services which <em>will</em> always switch the caller to the mode mentioned, or <em>might</em> have to do so, depending on the context. The absence of such tag indicates that such services can complete in either modes and as such will entail no switch. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
